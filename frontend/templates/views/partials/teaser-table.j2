{% if teaser_doc.view == '/views/detail/component-detail.j2' %}
{# Component teaser #}
{% do doc.styles.addCssFile('/css/components/molecules/teaser-table-component.css') %}
<div class="ap-m-teaser ap-m-teaser-table-component {% for format in teaser_doc.formats %}ap--{{ format }} {% endfor %}" data-category="{{ teaser_doc.category|slug }}" [hidden]="activeFilter.chosenFilter != 'none' && activeFilter.chosenFilter != '{{ teaser_doc.category|slug }}'">
  <div class="ap-m-teaser-row">
    {% if teaser_doc.formats %}
    {% do doc.styles.addCssFile('/css/components/molecules/tag.css') %}
    <div class="ap-m-teaser-tags">
      {% for format in teaser_doc.formats %}
      <div class="ap-m-tag ap-m-tag-{{ format }} ap-m-teaser-tag"></div>
      {% endfor %}
    </div>
    {% endif %}
    
    <div class="ap-m-teaser-name">
      <h4 class="ap-m-teaser-name-title">{{ teaser_doc.title }}</h4>
    </div>

    {% if teaser_doc.teaser and teaser_doc.teaser.text %}
    <div class="ap-m-teaser-info">
      <p class="ap-m-teaser-copy">{{ teaser_doc.teaser.text|truncate(100, false, '...') }}</p>
    </div>
    {% endif %}

    <div class="ap-m-teaser-link">
      <div class="ap-a-ico ap-m-lnk-icon">
        <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#internal"></use></svg>
      </div>
      <a class="ap-m-teaser-link" href="{{ teaser_doc.url.path }}"> see component</a>
    </div>
  </div>
</div>
{% elif teaser_doc.view == '/views/examples/documentation.j2' %}
{# Example teaser #}
{% do doc.styles.addCssFile('/css/components/molecules/teaser-example.css') %}
<div class="ap-m-teaser ap-m-teaser-example ap--{{ teaser_doc.formats[0] }}" data-category="{{ teaser_doc.category|slug }}" [hidden]="activeFilter.chosenFilter != 'none' && activeFilter.chosenFilter != '{{ teaser_doc.category|slug }}'">
  {% if teaser_doc.used_components %}
  <div class="ap-m-teaser-info-trigger">
    <strong>{{ teaser_doc.used_components|length }} AMP components</strong> used
  </div>

  <div class="ap-m-teaser-info-content">
    <div class="ap-m-teaser-info-headline">Used components</div>
    <ul class="ap-m-teaser-info-list">
      {% for used_component in teaser_doc.used_components %}
      <li class="ap-m-teaser-info-list-item">
        {% set component_path = '/content/amp-dev/documentation/components/reference/' + used_component + '.md' %}
        {% if doc.pod.file_exists(component_path) %}
        <a href="{{ g.doc(component_path, locale=doc.locale).url.path }}" class="ap-m-teaser-info-list-item-link">{{ used_component }}</a>
        {% else %}
        <a href="{{ g.doc('/content/amp-dev/documentation/components/index.html', locale=doc.locale).url.path }}" class="ap-m-teaser-info-list-item-link">{{ used_component }}</a>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
    <div class="ap-m-teaser-info-link">
      <a class="ap-m-lnk" href="{{ teaser_doc.url.path }}">
        <div class="ap-a-ico ap-m-lnk-icon">
          <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#internal"></use></svg>
        </div>
        <span class="ap-m-lnk-text">{{ _('See example' ) }}</span>
      </a>
    </div>
  </div>
  {% endif %}

  <a class="ap-m-teaser-linking" href="{{ teaser_doc.url.path }}">
    <div class="ap-m-teaser-card">
      {% set teaser = teaser_doc.teaser or {} %}

      {% if teaser_doc.formats %}
      <div class="ap-m-teaser-placeholder">
        {% do doc.styles.addCssFile('/css/components/molecules/tag.css') %}
        <div class="ap-m-teaser-tags">
          {% for format in teaser_doc.formats %}
          <div class="ap-m-tag ap-m-tag-{{ format }} ap-m-teaser-tag"></div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <div class="ap-m-teaser-image">
        {% if teaser.image %}
        <amp-img
          src="{{ teaser.image.src }}"
          layout="fill"
          width="22"
          height="9"
          alt="{{ teaser_doc.title }}">
        </amp-img>
        {% elif teaser.icon %}
        <div class="ap-m-teaser-icon">
          {% do doc.icons.useIcon('icons/' + teaser.icon + '.svg') %}
          <div class="ap-a-ico">
            <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#{{ teaser.icon }}"></use></svg>
          </div>
        </div>
        {% else %}
        <div class="ap-m-teaser-icon">
          {% do doc.icons.useIcon('icons/example-default.svg') %}
          <div class="ap-a-ico">
            <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#example-default"></use></svg>
          </div>
        </div>
        {% endif %}
      </div>

      <div class="ap-m-teaser-content">
        <h4 class="ap-m-teaser-headline">{{ teaser_doc.titles('teaser') }}</h4>
      </div>
    </div>
  </a>
</div>
{% endif %}
